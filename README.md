[!icon](data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAzMDAuODA2IDMwMC44MDYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMC44MDYgMzAwLjgwNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnIGlkPSJYTUxJRF8xMjQwXyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZD0iTTE5Ni44NzQsMTQ5LjIxOWMwLDAsMC4yMjUsMzQuMDgsMC4yMjUsMTI5LjkyOGgyLjk2YzUuMjQxLDAsOS40OS00LjI0OCw5LjQ5LTkuNDg5VjE1OS42NiAgICAgQzIwMy43NTIsMTU3Ljk4NSwxOTkuODExLDE1NC4zOTgsMTk2Ljg3NCwxNDkuMjE5eiIgZmlsbD0iIzAwNzA1YSIvPgoJCQk8cGF0aCBkPSJNMTE2Ljc4MywyNjkuMjExYy0yLjgyNSwwLTUuMTE1LTIuMjktNS4xMTUtNS4xMTV2LTUzLjc0N2MtOC42NTctMi4zMzItMTUuMjM1LTEwLjI4My0xNS4xODctMTkuOTYxbDAuMzgxLTc1Ljk2MiAgICAgYzAuMDU4LTExLjY0Nyw1LjkxMy0yMS45NTgsMTQuODA1LTI4LjIxNFY0My4xNzJjMC0yLjgyNSwyLjI5LTUuMTE1LDUuMTE1LTUuMTE1YzIuODI1LDAsNS4xMTUsMi4yOSw1LjExNSw1LjExNXYzOC4xMTQgICAgIGM1LjEyNC0xLjQ5NCw4Ljg2Ni0xLjM4NSwxMS40NzEtMS4zODVjLTMuNTYxLTUuMTIxLTUuNjU4LTExLjMzNC01LjY1OC0xOC4wM2MwLTE3LjQ1OCwxNC4yMDMtMzEuNjYsMzEuNjYtMzEuNjYgICAgIGMxNy40NTcsMCwzMS42NiwxNC4yMDMsMzEuNjYsMzEuNjZjMCw2LjY5Ni0yLjA5NSwxMi45MS01LjY1NywxOC4wM2gyLjczMmM4LjI2NywwLDE2LjA1LDMuNTg0LDIxLjQ0MSw5LjYyVjM0LjU4NSAgICAgYzAtNS4yNC00LjI0OC05LjQ4OS05LjQ5LTkuNDg5aC01OC4xOEMxNDEuODc2LDExLjIzNiwxMzAuNjQsMCwxMTYuNzgsMGMtMTMuODYsMC0yNS4wOTYsMTEuMjM2LTI1LjA5NiwyNS4wOTZIMzMuNTA3ICAgICBjLTUuMjQxLDAtOS40OSw0LjI0OC05LjQ5LDkuNDg5djIzNS4wNzRjMCw1LjI0LDQuMjQ4LDkuNDg5LDkuNDksOS40ODloODguMTQydi0xMy40OCAgICAgQzEyMC45ODYsMjY3LjcyMywxMTkuMDU5LDI2OS4yMTEsMTE2Ljc4MywyNjkuMjExeiIgZmlsbD0iIzAwNzA1YSIvPgoJCQk8cGF0aCBkPSJNMjY3LjU5OSwxMDAuNDcxaC0xNi41NTZjLTUuMDc1LDAtOS4xODksNC4xMTQtOS4xODksOS4xODl2NC40MzljNy4yOTItMS4zMzksOC4xNjUtMS41ODksMTAuNTI4LTEuNTg5ICAgICBjOS45MjIsMCwxOC40MjYsNy4wODksMjAuMjIsMTYuODU2YzIuMDQ5LDExLjE1NS01LjM2LDIxLjg5OC0xNi41MTYsMjMuOTQ3bC0xNC4xMjYsMi41OTRjMC42NDQsNC40NDYsNC40NTksNy44NjUsOS4wODMsNy44NjUgICAgIGgxNi41NTZjNS4wNzUsMCw5LjE4OS00LjExNCw5LjE4OS05LjE4OXYtNDQuOTIzQzI3Ni43ODgsMTA0LjU4NSwyNzIuNjc0LDEwMC40NzEsMjY3LjU5OSwxMDAuNDcxeiIgZmlsbD0iIzAwNzA1YSIvPgoJCQk8cGF0aCBkPSJNMjYyLjUzOSwxMzEuMjE1Yy0xLjAzMi01LjYxNS02LjQyMS05LjMzNC0xMi4wMzgtOC4zMDJsLTI5Ljg5OSw1LjQ5MmwtMTYuMzk2LTI4Ljg5NyAgICAgYy0zLjI4Mi01Ljc4NC05LjQ1MS05LjM3Ni0xNi4xLTkuMzc2Yy02Ljc2NCwwLTUwLjQ0MiwwLTU2LjU0NCwwYy0xMy40MjUsMC0yNC40MDIsMTAuOTIxLTI0LjQ2OSwyNC4zNDVsLTAuMzgyLDc1Ljk2MyAgICAgYy0wLjAyOSw1LjcxLDQuNTc3LDEwLjM2MywxMC4yODcsMTAuMzkyYzAuMDE4LDAsMC4wMzUsMCwwLjA1MywwYzUuNjg2LDAsMTAuMzEtNC41OTUsMTAuMzM4LTEwLjI4N2wwLjM4Mi03NS45NjMgICAgIGMwLjAxMS0yLjA3OCwxLjcxLTMuNzcsMy43OS0zLjc3aDAuMzEzbDAuMDA1LDE3Ny41ODhjMCw2Ljg1Miw1LjU1NSwxMi40MDcsMTIuNDA4LDEyLjQwN3MxMi40MDgtNS41NTUsMTIuNDA4LTEyLjQwN3YtOTkuMTc3ICAgICBoNS4zNTd2OTkuMTc3YzAsNi44NTcsNS41NiwxMi40MDcsMTIuNDA4LDEyLjQwN2M2Ljg1MywwLDEyLjQwOC01LjU1NSwxMi40MDgtMTIuNDA3YzAtNDcuMzA1LTAuMjI1LTEzMC4yNzctMC4yMjUtMTc3LjU4OGgwLjIgICAgIGwxOS40MDEsMzQuMTk0YzIuMTcsMy44MjUsNi41MjYsNS44NjMsMTAuODYxLDUuMDY3bDM3LjEzMi02LjgyQzI1OS44NTQsMTQyLjIyLDI2My41NzEsMTM2LjgzMSwyNjIuNTM5LDEzMS4yMTV6IiBmaWxsPSIjMDA3MDVhIi8+CgkJCTxwYXRoIGQ9Ik0xMzcuOTQyLDYxLjg3YzAsMTEuODk4LDkuNjcsMjEuNDMsMjEuNDMsMjEuNDNjMTEuODI4LDAsMjEuNDMtOS41ODksMjEuNDMtMjEuNDNjMC0xMS44MzUtOS41OTQtMjEuNDMtMjEuNDMtMjEuNDMgICAgIEMxNDcuNTM3LDQwLjQ0MSwxMzcuOTQyLDUwLjAzNSwxMzcuOTQyLDYxLjg3eiIgZmlsbD0iIzAwNzA1YSIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K)
# elevator
[![Maintainability](https://api.codeclimate.com/v1/badges/083de9bce09a2a67c06d/maintainability)](https://codeclimate.com/github/gokaykucuk/elevator/maintainability)
[![codecov](https://codecov.io/gh/gokaykucuk/elevator/branch/master/graph/badge.svg)](https://codecov.io/gh/gokaykucuk/elevator)
[![Build Status](https://travis-ci.org/gokaykucuk/elevator.svg?branch=master)](https://travis-ci.org/gokaykucuk/elevator)
[![Coveralls](https://img.shields.io/coveralls/gokaykucuk/elevator/master.svg)](https://coveralls.io/github/gokaykucuk/elevator)
![GithubSize](https://img.shields.io/github/size/webcaetano/craft/build/phaser-craft.min.js.svg)
![license](https://img.shields.io/github/license/mashape/apistatus.svg)
[![readthedocs](https://readthedocs.org/projects/gokaykucukelevator/badge/?version=latest)](https://readthedocs.org/projects/gokaykucukelevator/)

A golang library for requesting self-sudo.

Simply put, the idea is in the runtime, if the process is not started with superuser permissions, request them
and then restart the application. The only rule is, this libraries `CheckAndRequestElevation()` function *MUST* be
called as the first thing before the main application loads.

To supply the sudo username and password during development locally, just use the environment variables defined as,

    ELEVATOR_SUDO_PASSWORD=12341234

As you should already know, what i described a moment ago is a terrible idea, and you should never do it. But, if
you feel like not entering the password again and again on every restart while debugging your application, it's
actually a quite useful tool. Maybe I'll provide more elegant ways of supplying a default password and username in
future.


### Installation

Just as any other go package, you can get it with `go get`

    go get -u github.com/gokaykucuk/elevator


### Example

    package main
    
    import (
    	"github.com/gokaykucuk/elevator"
    	"gitlab.com/..."
    )
    
    var (
    	version   = "No version provided"
    	commit    = "No commit provided"
    	buildTime = "No build timestamp provided"
    )
    
    func main() {
    	elevator.CheckAndRequestElevation()
    	cmd.SetVersion(&cmd.Version{
    		Version:   version,
    		Commit:    commit,  
    		BuildTime: buildTime,
    	})
    	cmd.Execute()
    }


### Contributing
You can create a PR and as long as it makes sense, and doesn't enlarge the scope of the project by 2, it'll be merged.

### Testing
Currently there are no real tests because i don't have a good idea how to write them. If you have any good ideas please
open a pull request.

### TODO
- Make it windows compatibale?
- Make another function which will only check but not ask for permissions